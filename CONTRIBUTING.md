# Contributing to 语道 (VoiceDAO)

感谢你对本项目的关注！请遵循以下协作规范。

## 协作流程

---

1. 拉取最新代码，基于主分支开发。
2. 保证本地编译通过、无警告。
3. 自查代码风格、注释、国际化、资源管理等规范。
4. 提交 PR 时简要说明变更内容和影响范围。
5. 有问题请先查阅 `README.md` 和本文件，或提交 Issue。

## 代码规范

---

### 结构分层

- UI 相关类放在 `ui` 包
- 业务逻辑类放在 `logic` 包
- 工具类放在 `util` 包
- 适配器类放在 `adapter` 包
- 新增文件需自动分层，并按功能分区加注释

### 命名规范

- **类名**：大驼峰（PascalCase），如 `MainActivity`
- **方法名/变量名**：小驼峰（camelCase），如 `startSpeak()`
- **常量名**：全大写+下划线，如 `AUDIO_FILE_NAME`
- **包名**：全小写，结构清晰，如 `com.citadawn.speechapp.util`
- 避免拼音和缩写（TTS、UI等行业通用除外）

### 注释规范

- 重要类、方法、复杂逻辑需加注释，说明功能、参数、返回值、异常等
- 所有功能分区用 `// region ... // endregion` 注释
- 用户可见文本必须国际化，特殊情况需注明原因

### 资源管理

- 所有颜色、尺寸值必须用资源引用（`@color/`、`@dimen/`），禁止硬编码
- 清理未使用资源，删除空目录

### 代码优化

- 提取重复代码到工具类，避免冗余
- 魔法数字提为常量
- 使用 `WeakReference` 避免内存泄漏

### 依赖管理

- 统一用 `gradle/libs.versions.toml` 管理依赖版本
- 定期升级 Android Gradle Plugin 和核心库
- 修复过时 API，保持代码现代化

## 国际化规范

---

- 所有用户可见文本统一放入 `res/values/strings.xml`，并支持多语言（如 `values-zh/strings.xml`）
- 以 `values-zh/strings.xml` 为默认文件，先添加中文，再同步翻译到英文
- 确保所有字符串资源 ID 完全一致

## Markdown 文档规范

---

- 最大标题为二级标题（即 `##`），不得出现一级标题（`#`）
- 标题前后需有空行，二级标题下先加空行再加分割线（`---`）和空格
- 列表项之间不加空行
- 代码块、引用等结构前后需加空行
- 文档正文开头不得出现文件名或文档标题
- 小节标题建议不带序号，保持简洁
- 文档结尾不加总结语和分割线
- 对于键盘按键，使用 `<kbd></kbd>` 标签包裹，例如 <kbd>Ctrl</kbd>+<kbd>C</kbd>
- 中文与英文、数字之间加空格，包括 Markdown 文档名，对于专有名词、固定词组等不需要强制添加空格

### 代码格式规范

- 代码包括 Markdown 语法、HTML 语法等标记语言，以及 Java 等编程语言，不仅限于编程语言代码
- **行内代码格式**：正文中涉及代码的内容（如变量名、方法名、类名、参数、返回值、资源ID等）必须使用行内代码格式（用反引号包围）
- **代码块格式**：完整代码示例用三个反引号包围，并标注语言类型。代码块内内容（如注释、变量名等）不需行内代码格式
- **资源引用格式**：Android 资源引用（如 `@string/`、`@color/`、`@dimen/` 等）用行内代码格式
- **包名/方法/变量/类/常量**：均用行内代码格式，如 `com.citadawn.speechapp.util`、`setupInfoIcons()`、`findViewById()`、`MainActivity`、`R.string.your_info_title`

## 新增文件/类/工具类模板

---

- 新增 Java 文件请参考如下模板分区：
  
  ```java
  // region 成员变量
  // endregion
  // region 生命周期
  // endregion
  // region 公开方法
  // endregion
  // region 私有方法
  // endregion
  // region 回调/内部类
  // endregion
  ```

- 新增适配器类请分区：成员变量、构造方法、适配器核心方法、内部类、辅助方法

- 新增工具类请分区：静态工具方法、私有辅助方法

## 相关开发指南

---

- [信息图标开发指南](./信息图标开发指南.md) - 信息图标的标准模板和使用方法
- [README.md](./README.md) - 项目说明文档

---

如有更优建议，欢迎补充！ 