![[学习笔记/Android 应用程序开发/视图（View）/attachments/视图容器类.png|500]]

## AdapterView 类常用方法

---

> [!QUOTE]
> 直接父类： [[学习笔记/Android 应用程序开发/视图（View）/ViewGroup 类|ViewGroup 类]]  
> 直接子类： [[学习笔记/Android 应用程序开发/视图（View）/视图容器类#AbsListView 类常用属性|AbsListView]]  

| 方法                                                                     | 描述                                                        |
|------------------------------------------------------------------------|-----------------------------------------------------------|
| setOnClickListener(View.OnClickListener l)                             | 为视图设置点击事件监听器【重写】                                          |
| setOnItemSelectedListener(AdapterView.OnItemSelectedListener listener) | 为 `AdapterView` 的子类（如 `Spinner`, `ListView` 等）设置选项选中时的监听器 |
| setAdapter(T adapter)                                                  | 为控件设置适配器                                                  |
| T getAdapter()                                                         | 获取先前为某个控件（设置的适配器                                          |

## AbsListView 类常用属性

---

> [!QUOTE]
> 直接父类：[[学习笔记/Android 应用程序开发/视图（View）/视图容器类#AdapterView 类常用方法|AdapterView 类]]  
> 直接子类：  
> 1. [[学习笔记/Android 应用程序开发/视图（View）/视图容器类#列表视图 ListView|ListView]]
> 2. [[学习笔记/Android 应用程序开发/视图（View）/视图容器类#网格视图 GridView|GridView]]

| 属性                              | 值                                                                                                                                                                                                                                           | 描述                                                                                                    |
|---------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| android:listSelector            | 可以是颜色值，格式为“ `#rgb` ”，“ `#argb` ”，“ `#rrggbb` ”或“ `#aarrggbb` ”。也可以是另一种资源的引用，其形式为“ `@[+][package:]type:name` ”，或者其形式为“一个主题属性 `?[package:][type:]name` ”。                                                                                     | 设置列表项在被选中时显示的外观（比如颜色、边框等。可以通过 `<selector>` 标签设置不同状态下呈现不同的外观                                           |
| android:fastScrollEnabled       | true/false                                                                                                                                                                                                                                  | 启用可拖动的快速滚动滑块，以便能够快速滚动列表。                                                                              |
| android:fastScrollAlwaysVisible | true/false                                                                                                                                                                                                                                  | 控制快速滚动条是否始终可见                                                                                         |
| android:transcriptMode          | disabled：默认值，禁用滚动模式。这意味着控件将不会根据新添加的数据自动滚动。<br>normal：正常滚动模式。在这种模式下，如果最后一个条目已经在可视范围内，当数据更新时，控件不会自动滚动到底部。但是，如果最后一个条目不在可视范围内，并且有新数据添加，控件可能会滚动以显示新添加的条目（具体行为可能因控件实现而异）。<br>alwaysScroll：总是滚动模式。在这种模式下，每当有新数据添加到控件时，控件会自动滚动到底部，以确保最新的条目始终在可视范围内。 | 控制支持滚动条的控件（如 ListView、GridView 等）的滚动行为，特别是在动态添加数据到列表时，如何自动滚动到最新的条目。（这种设置非常适合实现类似于聊天应用中的自动滚动到最新消息的功能。） |
| android:requiresFadingEdge      |                                                                                                                                                                                                                                             | 【继承： [[学习笔记/Android 应用程序开发/视图（View）/View 类\|View 类]] 】                                                |
| android:fadingEdgeLength        |                                                                                                                                                                                                                                             | 【继承： [[学习笔记/Android 应用程序开发/视图（View）/View 类\|View 类]] 】                                                |
| android:scrollbars              |                                                                                                                                                                                                                                             | 【继承： [[学习笔记/Android 应用程序开发/视图（View）/View 类\|View 类]] 】                                                |
| android:fadeScrollbars          |                                                                                                                                                                                                                                             | 【继承： [[学习笔记/Android 应用程序开发/视图（View）/View 类\|View 类]] 】                                                |
| android:overScrollMode          |                                                                                                                                                                                                                                             | 【继承： [[学习笔记/Android 应用程序开发/视图（View）/View 类\|View 类]] 】                                                |

## 列表视图 ListView

---

>[!QUOTE]
>直接父类：[[学习笔记/Android 应用程序开发/视图（View）/视图容器类#AbsListView 类常用属性|AbsListView]]  
>直接子类：[[学习笔记/Android 应用程序开发/视图（View）/视图容器类#多级列表 ExpandableListView|ExpandableListView]]  

ListView 控件可以通过 android:entries 属性绑定数据源，也可以通过数据适配器加载数据。  

创建 ListView 组件，一般需要一下三个元素：  

1. ListView 中每一行的 View。View 可以是系统存在的布局 XML 文件，也可以是自定义的 XML 布局文件
2. 需要展示的数据。数据既可以来自数组资源，也可以在程序中生成
3. 连接数据与 ListView 的适配器。如果使用 android:entries 属性，可不使用适配器

### ListView 常用属性

| 属性                    | 值                                                                                                                                                     | 说明                 | 对应的方法                        |
|-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|------------------------------|
| android:entries       | 必须是另一个资源的引用，其形式为“ `@[+][package:]type:name` ”，或者其形式为“一个主题属性 `?[package:][type:]name` ”                                                                | 引用将填充ListView的数组资源 |                              |
| android:divider       | 可以是“ `#rgb` ”，“ `#argb` ”，“ `#rrggbb` ”或“ `#aarrggbb` ”形式的颜色值。也可以是另一种资源的引用，其形式为“ `@[+][package:]type:name` ”，或者其形式为“一个主题属性 `?[package:][type:]name` ” |                    | setDivider(Drawable divider) |
| android:dividerHeight | 必须是一个维度值，这是一个浮点数，后面跟着一个单位，例如“ 14.5sp ”。 可用单位为：px，dp，sp，mm。也可以是对包含此类型值的资源（形式为“ `@[package:]type:name` ”）或主题属性（形式为“ `?[package:][type:]name` ”）         |                    | setDividerHeight(int height) |

- android:entries 属性不只能接受字符串数组。实际上，它可以接受能提供列表项数据的资源引用。虽然最常见的是字符串数组，但也可以是其他类型的数组，只要这些数组中的元素能够被正确地转换为`ListView`的列表项显示内容即可。例如，如果数组元素是自定义的对象，那么可能需要通过自定义`Adapter`来处理这些对象到列表项视图的映射和显示。  

### ListView 类常用方法

| 方法                                                                       | 描述                                                                   |
|:-------------------------------------------------------------------------|:---------------------------------------------------------------------|
| addFooterView(View v) #待补充                                               | 给视图添加脚注                                                              |
| removeFooterView(View v)                                                 | 移除视图脚注                                                               |
| addHeaderView(View v) #待补充                                               | 给视图添加头注                                                              |
| removeHeaderView(View v)                                                 | 移除视图头注                                                               |
| int getMaxScrollAmount() #待补充                                            | 获得视图的最大滚动数量                                                          |
| setDivider(Drawable divider)                                             | 设置元素间的分隔符                                                            |
| setDividerHeight(int height)                                             | 设置分隔符的高度。调用它将覆盖由setDivider(Drawable)设置的固有高度                          |
| setAdapter(ListAdapter adapter)                                          | 为 `ListView` 设置数据适配器【重写】                                             |
| ListAdapter	getAdapter()                                                 | 返回当前此ListView中正在使用的适配器【重写】                                           |
| setAdapter(T adapter)                                                    | 【继承】                                                                 |
| setSelection(int position) #待补充                                          | 设置视图中的选中项。如果在触摸模式下，该项目不会被选中，但它仍然会被适当定位。 如果指定的选择位置小于0，则选择位置0处的项目。【重写】 |
| setOnItemClickListener(AdapterView.OnItemClickListener listener)         | 设置ListView数据项点击监听器【继承】                                               |
| setOnItemLongClickListener(AdapterView.OnItemLongClickListener listener) | 设置长时间点击数据项时的监听器【继承】                                                  |
| setOnItemSelectedListener(AdapterView.OnItemSelectedListener listener)   | 设置数据项选定时的监听器【继承】                                                     |
| setOnClickListener(OnClickListener l)                                    | 设置ListView点击事件监听器【继承】                                                |

- addFooterView(View v) 方法调用应该在设置适配器（setAdapter）之前进行，因为适配器负责生成列表或网格中的视图，如果在设置适配器之后添加脚注，可能会导致脚注出现在列表或网格的内容之中，而不是底部。    

	但是我在调用 setAdapter 方法之前就调用了 addFooterView还是出现了addFooterView在列表的内容之中的情况 #待补充   

- setOnClickListener(OnClickListener l) 方法需要注意的是不能为 ListView 组件设置点击事件监听器，而是在 `getView` 方法中为每个列表项的视图设置点击监听器，实例如下：  

	```java
	public class MyAdapter extends BaseAdapter {
	
	    @Override
	    public View getView(int position, View convertView, ViewGroup parent) {
	        if (convertView == null) {
	            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item_layout, parent, false);
	        }
			
	        convertView.setOnClickListener(new View.OnClickListener() {
	            @Override
	            public void onClick(View v) {
	                // 处理点击事件
	            }
	        });
			
	        return convertView;
	    }
		
	    // 其他必要的方法...
	}
	```

### 使用 entries 属性绑定数据源

一般使用 entries 属性绑定字符串数组资源。实例如下：  

1. 在 `res/values` 目录下的资源文件（如 `arrays.xml`）中定义一个字符串数组：

	```xml
	<?xml version="1.0" encoding="utf-8"?>
	<resources>
	    <string-array name="sports">
	        <item>足球</item>
	        <item>篮球</item>
	        <item>乒乓球</item>
	        <item>网球</item>
	    </string-array>
	</resources>
	```

2. 然后在 `ListView` 的 XML 布局定义中使用 `android:entries="@array/sports"`

### 使用 ArrayAdapter 适配器绑定数据源

实例：  

```java
setContentView(R.layout.listview);
String[] strings = getResources().getStringArray(R.array.sports);
ListView listView = (ListView) findViewById(R.id.listview);
ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1,strings);
listView.setAdapter(arrayAdapter);
```

或者：  

```java
setContentView(R.layout.listview);
String[] strings = {"足球","篮球","乒乓球","网球"};
ListView listView = (ListView) findViewById(R.id.listview);
ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1,strings);
listView.setAdapter(arrayAdapter);
```

### 使用 SimpleAdapter 适配器绑定数据源

步骤：  

1. 定义一个用来显示每一行内容（每一数据项）的布局 XML
2. 定义一个 HashMap 构成的列表，将数据以键值对的形式存储
3. 建立对应的 SimpleAdapter 适配器对象
4. 调用 ListView 对象的 setAdapter() 方法为 ListView 设置所使用的适配器
5. 调用 ListView 对象的 setOnItemClickListener() 方法设置所使用的监听器，用于相应用户点击数据项后的事件，并实现 onItemClick() 方法

实例：  

1. 定义一个用来显示每一行内容（每一数据项）的布局 XML，布局文件为 listview2.xml

	```xml
	<?xml version="1.0" encoding="utf-8"?>
	<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
	    android:layout_width="match_parent"
	    android:layout_height="match_parent">
	
	    <ImageView
	        android:id="@+id/img"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content" />
	
	    <TextView
	        android:id="@+id/tv"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"  
			android:layout_marginLeft="20dp" />
	</LinearLayout>
	```

2. 定义一个 HashMap 构成的列表，将数据以键值对的形式存储

	```java
	ArrayList<HashMap<String, Object>> arrayList = new ArrayList<>();
	HashMap hashMap = new HashMap();
	hashMap.put("img", R.drawable.i27);
	hashMap.put("tv", "保存设置");
	arrayList.add(hashMap);
	hashMap = new HashMap<>();
	hashMap.put("img", R.drawable.i28);
	hashMap.put("tv", "安全");
	arrayList.add(hashMap);
	hashMap = new HashMap<>();
	hashMap.put("img", R.drawable.i29);
	hashMap.put("tv", "系统设置");
	arrayList.add(hashMap);
	hashMap = new HashMap<>();
	hashMap.put("img", R.drawable.i30);
	hashMap.put("tv", "上网");
	arrayList.add(hashMap);
	hashMap = new HashMap<>();
	hashMap.put("img", R.drawable.i31);
	hashMap.put("tv", "我的文档");
	arrayList.add(hashMap);
	hashMap = new HashMap<>();
	hashMap.put("img", R.drawable.i32);
	hashMap.put("tv", "GPS导航");
	arrayList.add(hashMap);
	hashMap = new HashMap<>();
	hashMap.put("img", R.drawable.i33);
	hashMap.put("tv", "我的音乐");
	arrayList.add(hashMap);
	```

	或者：  

	```java
	// 定义一个保存图片的数组
	int[] imgId = {R.drawable.i27, R.drawable.i28, R.drawable.i29, R.drawable.i30, R.drawable.i31, R.drawable.i32, R.drawable.i33};
	// 定义一个保存文字的数组
	String[] words = {"保存设置", "安全", "系统设置", "上网", "我的文档", "GPS导航", "我的音乐"};
	ArrayList<HashMap<String, Object>> arrayList = new ArrayList<>();
	// 通过for循环将图片和文字放到Map集合中，在将Map集合添加进List集合中
	for (int i = 0; i < imgId.length; i++) {
		HashMap<String, Object> hashMap = new HashMap<>();
		hashMap.put("img", imgId[i]);
		hashMap.put("tv", words[i]);
		arrayList.add(hashMap);
	}
	```

3. 建立对应的 SimpleAdapter 适配器对象

	```java
	SimpleAdapter simpleAdapter = new SimpleAdapter(this, arrayList, R.layout.listview2, new String[]{"img", "tv"}, new int[]{R.id.img, R.id.tv});
	```

4. 调用 ListView 对象的 setAdapter() 方法为 ListView 设置所使用的适配器

	```java
	ListView listView = (ListView) findViewById(R.id.list_item);
	listView.setAdapter(simpleAdapter);
	```

5. 调用 ListView 对象的 setOnItemClickListener() 方法设置所使用的监听器，用于相应用户点击数据项后的事件，并实现 onItemClick() 方法

	```java
	listView.setOnItemClickListener((parent, view, position, id) -> {
		Toast.makeText(ListViewT.this, "" + arrayList.get(position).get("tv"), Toast.LENGTH_SHORT).show();
	});
	```

## 多级列表 ExpandableListView

---

>[!QUOTE]
>直接父类：[[学习笔记/Android 应用程序开发/视图（View）/视图容器类#列表视图 ListView|ListView]]

不能使用 entries 属性绑定数据源，只能使用适配器绑定数据源，并且只能使用实现了 ExpandableListAdapter 接口的适配器，比如`BaseExpandableListAdapter`。  

### ExpandableListView 常见属性

| 属性                                                                                                                    | 值                                                                                                                                                | 说明                                  |
|-----------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
| android:divider                                                                                                       |                                                                                                                                                  | 一级项目分隔符，可使用颜色或可绘制对象【继承】             |
| android:dividerHeight                                                                                                 |                                                                                                                                                  | 一级项目分隔符高度【继承】                       |
| android:childDivider                                                                                                  |                                                                                                                                                  | 二级项目分隔符，可使用颜色或可绘制对象                 |
| android:groupIndicator                                                                                                |                                                                                                                                                  | 一级项目旁边的标识。通常是一个`Drawable`对象，比如一个图像  |
| android:indicatorStart<br>android:indicatorEnd<br>android:indicatorLeft<br>android:indicatorRight                     | 可以是一个维度值，这是一个浮点数，后面跟着一个单位，例如“ 14.5sp ”。 可用单位为：px，dp，sp，mm。也可以是是对包含此类型值的资源（形式为“ `@[package:]type:name` ”）或主题属性（形式为“ `?[package:][type_:]name` ”）。 | 设置组列表项指示符周边约束位置，决定了组列表项指示符距离周边的距离。  |
| android:childIndicator                                                                                                |                                                                                                                                                  | 二级项目旁边的标识。通常是一个`Drawable`对象，比如一个图像  |
| android:childIndicatorStart<br>android:childIndicatorEnd<br>android:childIndicatorLeft<br>android:childIndicatorRight | 可以是一个维度值，这是一个浮点数，后面跟着一个单位，例如“ 14.5sp ”。 可用单位为：px，dp，sp，mm。也可以是是对包含此类型值的资源（形式为“ `@[package:]type:name` ”）或主题属性（形式为“ `?[package:][type_:]name` ”）。 | 设置子列表项指示符的周边约束位置，即确定子列表项指示符距离周边的距离。 |

### ExpandableListView 可实现的事件监听器接口

| 接口                                         | 说明                    |
|--------------------------------------------|-----------------------|
| ExpandableListView.OnGroupClickListener    | 实现在单击一级目录时调用的回调方法     |
| ExpandableListView.OnChildClickListener    | 实现在单击展开列表中的子项时调用的回调方法 |
| ExpandableListView.OnGroupCollapseListener | 一级目录折叠时执行             |
| ExpandableListView.OnGroupExpandListener   | 一级项目展开时执行             |

### ExpandableListAdapter 常见方法

![[学习笔记/Android 应用程序开发/视图（View）/attachments/ExpandableListAdapter.png]]

| 方法                                                                                                               | 描述                                                               |
|------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
| Object getGroup(int groupPosition)                                                                               | 获取某个一级项目                                                         |
| int getGroupCount()                                                                                              | 获取一级项目的数目                                                        |
| long getGroupId (int groupPosition)                                                                              | 获取某个一级项目的ID                                                      |
| View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent)                     | 获取某个一级项目的视图，其中convertView参数是可重用旧视图。在使用之前，应该检查此视图是否为非null且具有适当的类型 |
| Object getChild(int groupPosition, int childPosition)                                                            | 获取某个一级目录下的二级目录                                                   |
| int getChildrenCount(int groupPosition)                                                                          | 获取某个一级项目下的二级项目数目                                                 |
| long getChildId (int groupPosition, <br>                int childPosition)                                       | 获取某个二级项目的ID                                                      |
| View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) | 获取某个二级项目的视图，其中 convertView 是可重用旧视图。在使用之前，应该检查此视图是否为非null且具有适当的类型 |
| boolean hasStableIds()                                                                                           | 法用于指示适配器是否拥有稳定的ID                                                |
| boolean isChildSelectable(int groupPosition, int childPosition)                                                  | 设置特定组中的特定子项是否可选。默认所有子项都是可选的。                                     |

 - boolean hasStableIds() 方法：  
	
	稳定的ID是什么？在列表视图（如 ListView、RecyclerView）中，每个列表项都可以有一个唯一的标识符（ID）。如果列表项的顺序可能改变，但每个列表项的内部ID（即用于唯一标识该列表项的值）保持不变，那么这些ID就被认为是“稳定的”。  
	
	如果你的列表项ID不是稳定的（例如，每次重新加载数据时都会改变），那么你应该返回 false，以避免潜在的性能问题。
	  
- boolean isChildSelectable(int groupPosition, int childPosition) 方法使用实例：  

	```java
	@Override  
	public boolean isChildSelectable(int groupPosition, int childPosition) {  
	    // 假设我们有一个规则：只有当组位置是偶数时，其子项才是可选择的  
	    return groupPosition % 2 == 0;  
	      
	    // 或者，你可能有一个更复杂的逻辑，比如基于子项的具体内容来判断  
	    // 例如，检查某个特定条件，如果满足则返回true，否则返回false  
	    // return someConditionBasedOnChildData(groupPosition, childPosition);  
	}
	```

	```java
	@Override  
	public boolean isChildSelectable(int groupPosition, int childPosition) {  
	    // 也可以设置为所有子项都是可选的  
	    return true;  
	}
	```

### 实例

1. 定义整体界面布局文件

	```java
	<ExpandableListView  
	    android:id="@+id/expandableListView"  
	    android:layout_width="match_parent"  
	    android:layout_height="match_parent"  
	    android:divider="#9e9e9e"  
	    android:dividerHeight="0.5dp"  />
	```

2. 定义显示一级项目的布局文件 list_group.xml

	```java
	<TextView
	    android:id="@+id/listTitle"  
	    android:layout_width="match_parent"  
	    android:layout_height="wrap_content"  
	    android:paddingLeft="?android:attr/expandableListPreferredItemPaddingLeft"  
	    android:paddingTop="10dp"  
	    android:paddingBottom="10dp"  
	    android:textColor="#000" />
	```

3. 定义一个二级项目的布局文件 list_item.xml

	```java
	<TextView
	    android:id="@+id/expandableListItem"  
	    android:layout_width="match_parent"  
	    android:layout_height="wrap_content"  
	    android:paddingLeft="?android:attr/expandableListPreferredChildPaddingLeft"  
	    android:paddingTop="10pt"  
	    android:paddingBottom="10dp" />
	```

4. 准备分级数据

	```java
	public class ExpandableListData {  
	    public static HashMap<String, List<String>> getData(){  
	        HashMap<String, List<String>> expandableListDetail = new HashMap<>();  
	        ArrayList<String> arrayList = new ArrayList<>();  
	        Collections.addAll(arrayList,"Brazil","Spain","Germany","Netherlands","Italy");  
	        expandableListDetail.put("FOOTBALL TEAMS",arrayList);  
	        arrayList = new ArrayList<>();  
	        Collections.addAll(arrayList,"United States","Spain","Argentina","France","Russia");  
	        expandableListDetail.put("BASKETBALL TEAMS",arrayList);  
	        return expandableListDetail;  
	    }  
	}
	```

5. 继承 ExpandableListAdapter 实现数据适配器

	```java
public class CustomExpandableListAdapter extends BaseExpandableListAdapter {  
  
    private List<String> expandableListTitle;  
    private final HashMap<String, List<String>> expandableListDetail;  
  
    public CustomExpandableListAdapter(List<String> expandableListTitle, HashMap<String, List<String>> expandableListDetail) {  
        this.expandableListTitle = expandableListTitle;  
        this.expandableListDetail = expandableListDetail;  
    }  
  
    @Override  
    public int getGroupCount() {  
        return expandableListTitle.size();  
    }  
  
    @Override  
    public int getChildrenCount(int groupPosition) {  
        return expandableListDetail.get(expandableListTitle.get(groupPosition)).size();  
    }  
  
    @Override  
    public Object getGroup(int groupPosition) {  
        return expandableListTitle.get(groupPosition);  
    }  
  
    @Override  
    public Object getChild(int groupPosition, int childPosition) {  
        return expandableListDetail.get(expandableListTitle.get(groupPosition)).get(childPosition);  
    }  
  
    @Override  
    public long getGroupId(int groupPosition) {  
        return groupPosition;  
    }  
  
    @Override  
    public long getChildId(int groupPosition, int childPosition) {  
        return childPosition;  
    }  
  
    @Override  
    public boolean hasStableIds() {  
        return false;  
    }  
  
    @Override  
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {  
        if (convertView == null) {  
            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_group, parent, false);  
        }  
        final String listTitle = (String) getGroup(groupPosition);  
        TextView textView = convertView.findViewById(R.id.listTitle);
        textView.setTypeface(null, Typeface.BOLD); 
        textView.setText(listTitle);  
        return convertView;  
    }  
  
    @Override  
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {  
        if (convertView == null) {  
            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item, parent, false);  
        }  
        final String expandableListText = (String) getChild(groupPosition, childPosition);  
        TextView textView = convertView.findViewById(R.id.expandableListItem);  
        textView.setText(expandableListText);  
        return convertView;  
    }  
  
    @Override  
    public boolean isChildSelectable(int groupPosition, int childPosition) {  
        return true;  
    }  
}
```

6. 实现 Activity

	```java
	public class ExpandableListViewT extends AppCompatActivity {  
	    CustomExpandableListAdapter customExpandableListAdapter;  
	    List<String> expandableListTitle;  
	    HashMap<String, List<String>> expandableListDetail;  
	  
	    @Override  
	    protected void onCreate(Bundle savedInstanceState) {  
	        super.onCreate(savedInstanceState);  
	        setContentView(R.layout.expandablelistview);  
	        expandableListDetail = ExpandableListData.getData();  
	        expandableListTitle = new ArrayList<>(expandableListDetail.keySet());  
	        ExpandableListView expandableListView = (ExpandableListView) findViewById(R.id.expandableListView);  
	        customExpandableListAdapter = new CustomExpandableListAdapter(expandableListTitle,expandableListDetail);  
	        expandableListView.setAdapter(customExpandableListAdapter);  
	    }  
	}
	```

## 网格视图 GridView

---

>[!QUOTE]
>直接父类：[[学习笔记/Android 应用程序开发/视图（View）/视图容器类#AbsListView 类常用属性|AbsListView]]

GridView 组件是一种在二维可滚动网格中显示项目的视图，它没有 entries 属性，只能用适配器绑定数据。  

### GridView 常见属性

| 属性                        | 说明                                                                                                                 |
|---------------------------|--------------------------------------------------------------------------------------------------------------------|
| android:columnWidth       | 指定每列的固定宽度，可以是px、dp、sp、in或mm                                                                                        |
| android:horizontalSpacing | 定义列之间的默认水平间距，可以是px、dp、sp、in或mm                                                                                     |
| android:numColumns        | 定义要显示的列数。可以是整数，如“100”，也可以是“auto_fit”，这意味着显示尽可能多的列以填充可用空间                                                           |
| android:stretchMode       | 定义列应如何拉伸以填充可用空白区域。<br>none：禁用拉伸<br>spacingWidth：每列之间的距离被拉伸<br>columWidth：每列均匀拉伸<br>spacingWidthUniform：每列之间的距离均匀拉伸 |
| android:verticalSpacing   | 定义行之间的默认垂直间距，可以是px、dp、sp、in或mm                                                                                     |

## 下拉列表 Spinner

---

可以通过 Spinner 组件的 entries 属性绑定数据源，也可以通过数据适配器加载数据。  

![[学习笔记/Android 应用程序开发/视图（View）/attachments/Spinner 组件.png|200]]

### Spinner 常用属性

| 属性                             | 值                                                                                                                                                                                  | 说明                                                                                                                       | 对应的方法                          |
|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|--------------------------------|
| android:prompt                 | 必须是另一个资源的引用，其形式为“ `@[+][package:]type:name` ”，或者其形式为“一个主题属性 `?[package:][type:]name` ”                                                                                             | 在spinnerMode="dialog"模式下，设置对话框弹出的时候显示的提示，如 [[学习笔记/Android 应用程序开发/视图（View）/attachments/Spinner 组件.png\|上图]] 中的"请选择你喜欢的动物" | setPrompt(CharSequence prompt) |
| android:spinnerMode            | dialog：对话框模式<br>dropdown：下拉菜单模式（ 默认）                                                                                                                                               | 指定 Spinner 的显示模式                                                                                                         |                                |
| android:popupBackground        | 可以是“ `#rgb` ”，“ `#argb` ”，“ `#rrggbb` ”或“ `#aarrggbb` ”形式的颜色值。也可以是另一种资源的引用，其形式为“ `@[+][package:]type:name` ”，或者其形式为“一个主题属性 `?[package:][type:]name` ”。                             | 在spinnerMode="dropdown"模式下下拉列表所用的背景。                                                                                     |                                |
| android:dropDownWidth          | 可以是一个维度值，这是一个浮点数，后面跟着一个单位，例如“ 14.5sp ”。 可用单位为：px，dp，sp，mm。也可以是是对包含此类型值的资源（形式为“ `@[package:]type:name` ”）或主题属性（形式为“ `?[package:][type_:]name` ”）。还可以是 match_parent 或者 wrap_content。 | 在spinnerMode="dropdown"模式下下拉列表的宽度                                                                                        |                                |
| android:dropDownVerticalOffset | 可以是一个维度值，这是一个浮点数，后面跟着一个单位，例如“ 14.5sp ”。 可用单位为：px，dp，sp，mm。也可以是是对包含此类型值的资源（形式为“ `@[package:]type:n                                                                                  | 定义下拉菜单与触发它的控件之间垂直偏移量                                                                                                     |                                |
| android:dropDownSelector #待补充  | 可以是“ `#rgb` ”，“ `#argb` ”，“ `#rrggbb` ”或“ `#aarrggbb` ”形式的颜色值。也可以是另一种资源的引用，其形式为“ `@[+][package:]type:name` ”，或者一个主题属性其形式为“ `?[package:][type:]name` ”。                             | 在spinnerMode="dropdown"模式下下拉列表中选中项所使用的选择器。                                                                               |                                |

### Spinner 类常用方法

| 方法                                                                | 参数                                                                                            | 描述                   | 相关 XML 属性      |
|-------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|----------------------|----------------|
| setPrompt(CharSequence prompt)                                    | `CharSequence` 是一个接口，它表示一个可读的字符序列，比如 `String`、`StringBuilder`、`StringBuffer` 等都可以作为参数传递给这个方法。 | 同 android:prompt 属性  | android:prompt |
| setOnItemSelectedListener<br>(AdapterView.OnItemSelectedListener) |                                                                                               | 设置选项选中时的监听器【继承】      |                |
| setAdapter(SpinnerAdapter adapter)                                |                                                                                               | 为 Spinner 设置适配器。【重写】 |                |
| setAdapter(T adapter)                                             |                                                                                               | 【继承】                 |                |

### 实例

```java
private void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);
	setContentView(R.layout.spinner);
	// 从资源文件加载数据源
	ArrayAdapter arrayAdapter = ArrayAdapter.createFromResource(this, R.array.listItem, android.R.layout.simple_spinner_item);
	Spinner spinners = (Spinner) findViewById(R.id.my_spinner);
	spinners.setAdapter(arrayAdapter);
	// 设置目标控件展开时的样式
	arrayAdapter.setDropDownViewResource(android.R.layout.simple_list_item_single_choice);
	// 设置监听器，当用户选择后执行onItemSelected()方法
	spinners.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
		@Override
		public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
			String[] arr = getResources().getStringArray(R.array.listItem);// 知识点！
			Toast.makeText(SpinnerT.this, "你当前选择了：" + arr[position], Toast.LENGTH_SHORT).show();
		}

		@Override
		public void onNothingSelected(AdapterView<?> parent) {
			Toast.makeText(SpinnerT.this, "你未进行任何选择", Toast.LENGTH_SHORT).show();
		}
	});
	// 只有在在spinnerMode="dialog"模式下才能生效
	spinners.setPrompt("请选择你喜欢的动物");
}
```

## 选项卡 TabHost(弃用)

---

> [!QUOTE]
> 直接父类： [[学习笔记/Android 应用程序开发/视图（View）/布局类#帧布局 FrameLayout|FrameLayout]]

![[学习笔记/Android 应用程序开发/视图（View）/attachments/TabHost.png|150]]

在 Android 系统中，TabHost 组件是用于选项卡式窗口视图的容器。TabHost 组件包含两个子项：一个子项是用户点击以选择特定选项卡的选项卡标签集，另一个子项是显示该页面内容的 FrameLayout 对象。  

TabHost是 Tab 的容器，每个 Tab 包含 TabWidget 和 FrameLayout 两个部分，TabWidget 是每个 Tab 的标签，FrameLayout 是 Tab 内容。  

注意：

- TabHost在Android 3.0（API级别11）以上版本中被废弃。由于其设计违反了Activity单一窗口原则，它可以同时加载多个Activity，然后再它们之间进行来回切换；另外有个很致命的问题就是当点击别的选项时，按下Back后退键，它会使整个应用程序都退出，而不是切换到前一个选项卡，虽然可以在主程序里覆写OnKeyDown这个方法，但这样就会导致每一次按下Back后退键都只能回到第一个选项菜单。  
- 在 Activity 中使用 TabHost 组件时，需要继承 TabActivity 而不是 Activity。

### TabHost 常用方法

| 方法                                                     | 描述                                          |
|--------------------------------------------------------|---------------------------------------------|
| TabHost.TabSpec	 newTabSpec(String tag)                | 创建选项卡。参数为选项卡的名称，不用于显示                       |
| addTab(TabHost.TabSpec tabSpec)                        | 向 TabHost 添加一个选项卡                           |
| setOnTabChangedListener(TabHost.OnTabChangeListener l) | 注册监听器，用于在选项卡切换时执行                           |
| FrameLayout getTabContentView()                        | 获取一个与 `TabHost` 相关联的 FrameLayout 类型的选项卡内容视图 |

### TabHost.TabSpec 常用方法

| 方法                                                      | 描述                                 |
|---------------------------------------------------------|------------------------------------|
| TabSpec setIndicator(CharSequence label)                | 设置标签页的文本标签                         |
| TabSpec setIndicator(CharSequence label, Drawable icon) | 同时设置文本标签和图标                        |
| TabSpec setIndicator(View view)                         | 使用一个自定义的 View 作为标签页的指示器            |
| TabSpec setContent(int viewId)                          | 设置与该 TabSpec 相关联的视图的标识             |
| TabSpec setContent(Intent intent)                       | 指定一个用于启动 Activity 的 Intent 作为标签页内容 |

- TabSpec setContent(Intent intent) 方法使用实例：  

	```java
	TabSpec spec1 = tabHost.newTabSpec("tab1");  
	spec1.setIndicator("Tab 1", getResources().getDrawable(R.drawable.icon_tab1));  
	Intent intent1 = new Intent(this, Tab1Activity.class);  
	spec1.setContent(intent1);  
	
	TabSpec spec2 = tabHost.newTabSpec("tab2");  
	spec2.setIndicator("Tab 2", getResources().getDrawable(R.drawable.icon_tab2));  
	Intent intent2 = new Intent(this, Tab2Activity.class);  
	spec2.setContent(intent2);  
	
	tabHost.addTab(spec1);  
	tabHost.addTab(spec2);  
	```

### 实例

1. 定义整体界面布局文件

	```xml
	<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
	    android:id="@+id/tabHost"
	    android:layout_width="match_parent"
	    android:layout_height="match_parent">
		<!--想要有几个选项卡就定义几个组件。相同的组件可以只定义一个，但是如果使用适配器为组件绑定数据的话，尽管会显示多个选项卡，但是多个选项卡的数据会相同，因为先为组件绑定的数据会被后为组件绑定的数据覆盖。比如本xml布局文件如果只定义一个TextView组件的话，尽管能够显示两个选项卡，但是两个选项卡的数据会相同-->
	    <LinearLayout
	        android:id="@+id/line1"
	        android:layout_width="match_parent"
	        android:layout_height="match_parent">
	
	        <TextView
	            android:id="@+id/tv1"
	            android:layout_width="match_parent"
	            android:layout_height="wrap_content" />
	    </LinearLayout>
	
	    <LinearLayout
	        android:id="@+id/line2"
	        android:layout_width="match_parent"
	        android:layout_height="match_parent">
	
	        <TextView
	            android:id="@+id/tv2"
	            android:layout_width="match_parent"
	            android:layout_height="wrap_content" />
	    </LinearLayout>
	</TabHost>
	```

2. 实现 Activity

	```java
	public class TabHostT extends TabActivity {
	    @Override
	    protected void onCreate(@Nullable Bundle savedInstanceState) {
	        super.onCreate(savedInstanceState);
	        // 获取 TabHost 对象
	        TabHost tabHost = this.getTabHost();
	        // 初始化布局
			// 不能使用setContentView(R.layout.tabhost);
	        LayoutInflater.from(this).inflate(R.layout.tabhost, tabHost.getTabContentView(), true);
	        // 创建第一个选项卡
	        TabHost.TabSpec tabSpec1 = tabHost.newTabSpec("tabSpec1");
	        // 设置选项卡的文本标签
	        tabSpec1.setIndicator("水果");
	        // 将布局中id为line1的LinearLayout设置为本tab的内容
	        tabSpec1.setContent(R.id.line1);
	        // 初始化ListView中的数据
	        ArrayList<String> listView1Data = new ArrayList<>();
	        Collections.addAll(listView1Data, "苹果", "香蕉", "橙子", "草莓", "西瓜", "葡萄", "芒果", "梨", "桃子", "菠萝", "柚子");
	        ArrayAdapter<String> listView1Adapter = new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, listView1Data);
	        ListView listView1 = findViewById(R.id.listView1);
	        listView1.setAdapter(listView1Adapter);
	        // 将选项卡加入TabHost
	        tabHost.addTab(tabSpec1);
	        // 创建第二个选项卡
	        TabHost.TabSpec tabSpec2 = tabHost.newTabSpec("tabSpec2");
	        // 设置选项卡的文本标签
	        tabSpec2.setIndicator("动物");
	        // 将布局中id为line1的LinearLayout设置为本tab的内容
	        tabSpec2.setContent(R.id.line2);
	        // 初始化ListView中的数据
	        ArrayList<String> listView2Data = new ArrayList<>();
	        Collections.addAll(listView2Data, "猫", "孔雀", "狗", "兔子", "猴子", "大象", "长颈鹿", "狮子", "老虎", "熊", "马", "羊", "牛");
	        ArrayAdapter<String> listView2Adapter = new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, listView2Data);
	        ListView listView2 = findViewById(R.id.listView2);
	        listView2.setAdapter(listView2Adapter);
	        // 将选项卡加入TabHost
	        tabHost.addTab(tabSpec2);
	        // 响应选项卡切换事件
	        tabHost.setOnTabChangedListener(tabId -> Toast.makeText(TabHostT.this, "你切换到了" + tabId, Toast.LENGTH_SHORT).show());
	    }
	}
	```

	>[!INFO]
	>`getTabHost()` 方法通常是在继承自 `TabActivity` 的Activity中调用的，因为 `TabActivity` 类提供了一个 `getTabHost()` 方法来直接访问和配置 `TabHost`，用于获取 TabHost 对象。